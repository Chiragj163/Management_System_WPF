<Page x:Class="Management_System_WPF.Views.BuyerReportPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Background="Transparent">

    <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">

        <Border Background="#F8FFFFFF" Padding="30">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- 🔥 BUTTON BAR -->
                <Grid Grid.Row="0" Margin="0,0,0,20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Back -->
                    <Button Grid.Column="1"
                            Content="⟵ Back"
                            Width="140" Height="38"
                            Background="#3CB4A7" Foreground="White"
                            BorderThickness="0" FontSize="16"
                            Click="Back_Click"
                            Margin="0,0,10,0"/>

                    <!-- Previous Month -->
                    <Button x:Name="btnPrevMonth"
                            Grid.Column="2"
                            Content="Show Previous Month Sales"
                            Width="230" Height="38"
                            Background="#3CB4A7" Foreground="White"
                            BorderThickness="0" FontSize="16"
                            Click="PrevMonth_Click"
                            Margin="0,0,10,0"/>

                    <!-- Next Month -->
                    <Button x:Name="btnNextMonth"
                            Grid.Column="3"
                            Content="Show Next Month Sales"
                            Width="230" Height="38"
                            Background="#3CB4A7" Foreground="White"
                            BorderThickness="0" FontSize="16"
                            Click="NextMonth_Click"
                            Margin="0,0,10,0"/>

                    <!-- Print -->
                    <Button Grid.Column="4"
                            Content="Print"
                            Width="120" Height="38"
                            Background="#3CB4A7" Foreground="White"
                            BorderThickness="0" FontSize="16"
                            Click="Print_Click"
                            Margin="0,0,10,0"/>

                    <!-- Export -->
                    <Button Grid.Column="5"
                            Content="Export Excel"
                            Width="140" Height="38"
                            Background="#3CB4A7" Foreground="White"
                            BorderThickness="0" FontSize="16"
                            Click="ExportExcel_Click"/>

                    <!-- Filter -->
                    <Button x:Name="btnFilter"
                            Grid.Column="6"
                            Content="Filter"
                            Width="120" Height="38"
                            Background="#3CB4A7"
                            Foreground="White"
                            BorderThickness="0"
                            FontSize="16"
                            Click="Filter_Click"
                            Margin="10,0,0,0"/>
                </Grid>

                <!-- 🔥 BUYER + MONTH HEADING -->
                <StackPanel Grid.Row="1" Margin="0 0 0 20" HorizontalAlignment="Center">
                    <TextBlock x:Name="txtBuyerName"
                               Text="Buyer Name"
                               FontSize="32"
                               FontWeight="Bold"
                               HorizontalAlignment="Center"/>

                    <TextBlock x:Name="txtMonthName"
                               Text="Month"
                               FontSize="24"
                               FontWeight="SemiBold"
                               Foreground="#3CB4A7"
                               HorizontalAlignment="Center"/>
                </StackPanel>

                <!-- 🔥 DATAGRID -->
                <DataGrid Grid.Row="2"
                          x:Name="dgBuyerReport"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False"
                          HeadersVisibility="Column"
                          RowHeight="40"
                          FontSize="18"
                          ColumnHeaderHeight="40"
                          AlternationCount="2"
                          Background="White"
                          BorderBrush="#DDD"
                          BorderThickness="1"
                          VerticalScrollBarVisibility="Auto"
                          Margin="0 10 0 10">

                    <DataGrid.ColumnHeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="Background" Value="#3CB4A7"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="FontSize" Value="18"/>
                            <Setter Property="FontWeight" Value="SemiBold"/>
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                        </Style>
                    </DataGrid.ColumnHeaderStyle>
                    <DataGrid.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="TextBlock.TextAlignment" Value="Center"/>
                            <Setter Property="VerticalContentAlignment" Value="Center"/>

                            <Style.Triggers>
                                <!-- 🔥 CENTER GRAND TOTAL -->
                                <DataTrigger Binding="{Binding Date}" Value="Grand Total">
                                    <Setter Property="TextBlock.TextAlignment" Value="Center"/>
                                    <Setter Property="HorizontalContentAlignment" Value="Center"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DataGrid.CellStyle>


                    <DataGrid.RowStyle>
                        <Style TargetType="DataGridRow">
                            <Setter Property="FontSize" Value="18"/>

                            <Style.Triggers>
                                <Trigger Property="ItemsControl.AlternationIndex" Value="1">
                                    <Setter Property="Background" Value="#F3F9F9"/>
                                </Trigger>

                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#D7EFEA"/>
                                </Trigger>

                                <DataTrigger Binding="{Binding Date}" Value="Total Qty">
                                    <Setter Property="Background" Value="#E6E6E6"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                </DataTrigger>

                                <DataTrigger Binding="{Binding Date}" Value="Unit Price">
                                    <Setter Property="Background" Value="#FFF9C4"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                </DataTrigger>

                                <DataTrigger Binding="{Binding Date}" Value="Total Price">
                                    <Setter Property="Background" Value="#26A69A"/>
                                    <Setter Property="Foreground" Value="White"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Date}" Value="Grand Total">
                                    <Setter Property="Background" Value="#004D40"/>
                                    <Setter Property="Foreground" Value="White"/>
                                    <Setter Property="FontSize" Value="20"/>

                                    <Setter Property="FontWeight" Value="Bold"/>
                                </DataTrigger>


                            </Style.Triggers>
                        </Style>
                    </DataGrid.RowStyle>
                </DataGrid>

                
                <!-- 🔥 FILTER PANEL (FIXED + SHADOW) -->
                <Border x:Name="FilterPanel"
                        Visibility="Collapsed"
                        Background="White"
                        BorderBrush="#3CB4A7"
                        BorderThickness="2"
                        CornerRadius="10"
                        Padding="20"
                        Width="350"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Margin="0,90,20,0">

                    <Border.Effect>
                        <DropShadowEffect BlurRadius="20"
                                          ShadowDepth="0"
                                          Color="Black"
                                          Opacity="0.35"/>
                    </Border.Effect>

                    <StackPanel>
                        <TextBlock Text="Filter Sales"
                                   FontSize="22"
                                   FontWeight="Bold"
                                   Margin="0 0 0 10"/>

                        <Button Content="This Month" Click="FilterThisMonth_Click"
                                Height="38" Margin="0 5"
                                Background="#3CB4A7" Foreground="White"/>

                        <Button Content="Last 6 Months" Click="FilterSixMonths_Click"
                                Height="38" Margin="0 5"
                                Background="#3CB4A7" Foreground="White"/>

                        <Button Content="This Year" Click="FilterYear_Click"
                                Height="38" Margin="0 5"
                                Background="#3CB4A7" Foreground="White"/>

                        <TextBlock Text="Custom Date Range:" FontSize="16"
                                   Margin="0 10 0 5"/>

                        <StackPanel Orientation="Horizontal" Margin="0 5">
                            <DatePicker x:Name="dpFrom" Width="150"/>
                            <DatePicker x:Name="dpTo" Width="150" Margin="10 0 0 0"/>
                        </StackPanel>

                        <Button Content="Apply" Click="FilterCustom_Click"
                                Height="38"
                                Background="#3CB4A7" Foreground="White"
                                Margin="0 10 0 0"/>
                    </StackPanel>
                </Border>

            </Grid>
        </Border>
    </Grid>
</Page>
